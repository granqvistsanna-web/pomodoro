@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   Design Tokens - Single Source of Truth
   ============================================ */

:root {
    /* Accent - Primary brand color */
    --color-accent: #e85d36;
    --color-accent-hover: #d45430;
    --color-accent-muted: rgba(232, 93, 54, 0.12);
    --color-accent-glow: rgba(232, 93, 54, 0.3);

    /* Semantic colors */
    --color-success: #34c759;
    --color-success-muted: rgba(52, 199, 89, 0.15);

    /* Break color - calm blue */
    --color-break: #5b9bd5;
    --color-break-glow: rgba(91, 155, 213, 0.3);

    /* Backgrounds */
    --color-bg: #fafafa;
    --color-surface: #ffffff;
    --color-surface-elevated: rgba(255, 255, 255, 0.98);
    --color-surface-overlay: rgba(255, 255, 255, 0.95);

    /* Text */
    --color-text: rgba(0, 0, 0, 0.88);
    --color-text-secondary: rgba(0, 0, 0, 0.6);
    --color-text-muted: rgba(0, 0, 0, 0.4);
    --color-text-on-accent: #ffffff;

    /* Borders */
    --color-border: rgba(0, 0, 0, 0.08);
    --color-border-strong: rgba(0, 0, 0, 0.12);

    /* Interactive states */
    --color-focus-ring: var(--color-accent);
    --color-disabled: rgba(0, 0, 0, 0.25);
    --color-hover-bg: rgba(0, 0, 0, 0.04);
    --color-button-secondary-bg: rgba(0, 0, 0, 0.04);

    /* Toggle */
    --color-toggle-bg: #e5e5ea;
    --color-toggle-knob: #ffffff;
    --shadow-toggle: 0 1px 3px rgba(0, 0, 0, 0.15), 0 0 0 0.5px rgba(0, 0, 0, 0.04);

    /* Shadows - minimal */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.04);
    --shadow-md: 0 2px 4px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 4px 8px rgba(0, 0, 0, 0.08);

    /* Mode backgrounds */
    --color-mode-focus: linear-gradient(180deg, #ffffff 0%, #f5f5f5 100%);
    --color-mode-break: linear-gradient(180deg, #ffffff 0%, #f3f5f3 100%);
    --color-mode-break-long: linear-gradient(180deg, #ffffff 0%, #f4f3f6 100%);

    /* Scrollbar */
    --color-scrollbar: rgba(0, 0, 0, 0.08);
    --color-scrollbar-hover: rgba(0, 0, 0, 0.15);
}

[data-theme="dark"] {
    /* Accent - slightly brighter for dark mode visibility */
    --color-accent: #ff7f5c;
    --color-accent-hover: #ff9474;
    --color-accent-muted: rgba(255, 127, 92, 0.15);
    --color-accent-glow: rgba(255, 127, 92, 0.25);

    /* Semantic colors */
    --color-success: #30d158;
    --color-success-muted: rgba(48, 209, 88, 0.15);

    /* Break color - calm blue */
    --color-break: #6bb3e8;
    --color-break-glow: rgba(107, 179, 232, 0.25);

    /* Backgrounds */
    --color-bg: #141414;
    --color-surface: #1c1c1e;
    --color-surface-elevated: #2c2c2e;
    --color-surface-overlay: rgba(28, 28, 30, 0.95);

    /* Text - WCAG compliant contrast */
    --color-text: rgba(255, 255, 255, 0.92);
    --color-text-secondary: rgba(255, 255, 255, 0.65);
    --color-text-muted: rgba(255, 255, 255, 0.45);
    --color-text-on-accent: #ffffff;

    /* Borders - subtle, low contrast */
    --color-border: rgba(255, 255, 255, 0.08);
    --color-border-strong: rgba(255, 255, 255, 0.12);

    /* Interactive states */
    --color-disabled: rgba(255, 255, 255, 0.25);
    --color-hover-bg: rgba(255, 255, 255, 0.08);
    --color-button-secondary-bg: #2c2c2e;

    /* Toggle */
    --color-toggle-bg: #39393d;
    --color-toggle-knob: #ffffff;
    --shadow-toggle: 0 1px 2px rgba(0, 0, 0, 0.3);

    /* Shadows - minimal in dark mode */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.2);
    --shadow-md: 0 2px 4px rgba(0, 0, 0, 0.25);
    --shadow-lg: 0 4px 8px rgba(0, 0, 0, 0.3);

    /* Mode backgrounds - black on top */
    --color-mode-focus: linear-gradient(180deg, #000000 0%, #181818 100%);
    --color-mode-break: linear-gradient(180deg, #000000 0%, #171918 100%);
    --color-mode-break-long: linear-gradient(180deg, #000000 0%, #181719 100%);

    /* Scrollbar */
    --color-scrollbar: rgba(255, 255, 255, 0.1);
    --color-scrollbar-hover: rgba(255, 255, 255, 0.18);
}

/* ============================================
   Base Styles
   ============================================ */

* {
    font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

body {
    background: var(--color-bg);
    color: var(--color-text);
}

/* ============================================
   Mode Backgrounds
   ============================================ */

.bg-mode-focus {
    background: var(--color-mode-focus);
}

.bg-mode-break {
    background: var(--color-mode-break);
}

.bg-mode-break-long {
    background: var(--color-mode-break-long);
}

/* ============================================
   Typography
   ============================================ */

.tabular-nums {
    font-variant-numeric: tabular-nums;
    font-feature-settings: "tnum";
}

/* ============================================
   Animations
   ============================================ */

@keyframes fade-in {
    from {
        opacity: 0;
        transform: translateY(4px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes pulse-soft {
    0%, 100% {
        box-shadow: 0 0 4px 1px currentColor;
    }
    25% {
        box-shadow: 0 0 8px 3px currentColor;
    }
    50%, 100% {
        box-shadow: 0 0 4px 1px currentColor;
    }
}

@keyframes glow-pulse {
    0%, 100% {
        opacity: 1;
        transform: scale(1);
    }
    50% {
        opacity: 0.6;
        transform: scale(1.15);
    }
}

.animate-fade-in {
    animation: fade-in 0.2s ease-out;
}

.animate-pulse-soft {
    animation: pulse-soft 4s ease-in-out infinite;
}

.animate-glow-pulse {
    animation: glow-pulse 4s ease-in-out infinite;
}

@keyframes slide-up-fade {
    from {
        opacity: 0;
        transform: translateY(8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.animate-slide-up {
    animation: slide-up-fade 0.2s ease-out forwards;
}

.animate-delay-50 {
    animation-delay: 50ms;
    opacity: 0;
}

.animate-delay-100 {
    animation-delay: 100ms;
    opacity: 0;
}

/* ============================================
   Scroll Fade Indicator
   ============================================ */

.scroll-fade {
    mask-image: linear-gradient(
        to bottom,
        black 0%,
        black calc(100% - 24px),
        transparent 100%
    );
    -webkit-mask-image: linear-gradient(
        to bottom,
        black 0%,
        black calc(100% - 24px),
        transparent 100%
    );
}

/* ============================================
   Scrollbar
   ============================================ */

::-webkit-scrollbar {
    width: 4px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: var(--color-scrollbar);
    border-radius: 2px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--color-scrollbar-hover);
}

/* ============================================
   Focus States
   ============================================ */

button:focus-visible {
    outline: 2px solid var(--color-focus-ring);
    outline-offset: 2px;
}

/* Icon button */
.icon-btn {
    background-color: transparent;
    border: none;
}

.icon-btn:hover {
    background-color: var(--color-hover-bg);
    color: var(--color-accent);
}

/* Secondary button background */
.btn-secondary {
    background-color: var(--color-button-secondary-bg) !important;
}

/* Primary button */
.btn-primary {
    background-color: var(--color-accent) !important;
    color: var(--color-text-on-accent) !important;
    border: none;
}

.btn-primary:hover {
    background-color: var(--color-accent-hover) !important;
}

/* Hover accent */
.hover-accent:hover {
    color: var(--color-accent);
    border-color: var(--color-accent);
}

/* Session badge */
.session-badge {
    background-color: var(--color-hover-bg);
    border: none;
}
